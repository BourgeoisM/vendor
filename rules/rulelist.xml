<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/..\FrameXML\UI.xsd">

    <Frame name = "BaseVendorSimpleRuleTemplate" virtual="true" visble="false" parentArray="Rules">
        <Size x="250" y="64"/>
        <Layers>
            <Layer level="BACKGROUND">
                <Texture parentKey="OddBackground" hidden="true">
                    <Color r="1" g="1" b="1" a="0.10"/>
                    <Anchors>
                        <Anchor point="TOPLEFT" realtivePoint="TOPLEFT"/>
                        <Anchor point="BOTTOMRIGHT" realtivePoint="BOTTOMRIGHT"/>
                    </Anchors>
                </Texture>
                <Texture parentKey="Highlight" hidden="true">
                    <Color r="0" g="0" b="1.0" a="0.25"/>
                    <Anchors>
                        <Anchor point="TOPLEFT" realtivePoint="TOPLEFT"/>
                        <Anchor point="BOTTOMRIGHT" realtivePoint="BOTTOMRIGHT"/>
                    </Anchors>
                </Texture>
            </Layer>        
        </Layers>
        <Frames>
            <CheckButton name="$parentEnabled" parentKey="Enabled" inherits="OptionsBaseCheckButtonTemplate">
                <Anchors>
                    <Anchor point="TOPLEFT" relativeKey="$parent" relativePoint="TOPLEFT" x="2" y="0"/>
                </Anchors>  
                <Scripts>
                    <OnClick>if (self:GetParent().ToggleRuleState) then self:GetParent():ToggleRuleState() end</OnClick>
                </Scripts>
            </CheckButton>
        </Frames>       
        <Scripts>
            <OnEnter>self.Highlight:Show()</OnEnter>
            <OnLeave>self.Highlight:Hide()</OnLeave>
        </Scripts>
    </Frame>


    <Frame name="VendorSimpleRuleTemplate" virtual="true" visble="false" inherits="BaseVendorSimpleRuleTemplate">
        <Size x="250" y="64"/>
        <Layers>
            <Layer level="ARTWORK">
                <FontString parentKey="RuleName" inherits="GameFontHighlightLarge" justifyH="LEFT" text="RULE_NAME">
                    <Size x="272" y="20"/>
                    <Anchors>
                        <Anchor point="TOPLEFT"  x="32" y="-4"/>
                    </Anchors>
                </FontString>
                <FontString parentKey="RuleDescription" inherits="GameFontNormalSmall" justifyH="LEFT" justifyV="TOP" text="RULE_DESCRIPTION" wordwrap="true">
                    <Anchors>
                        <Anchor point="TOPLEFT" relativeKey="$parent.RuleName" relativePoint="BOTTOMLEFT" x="0" y="-2"/>
                        <Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" x="-4" y="4"/>
                    </Anchors>
                </FontString>
            </Layer>
        </Layers>
    </Frame>
    
    <Frame name="VendorRuleTemplateWithItemLevel" virtual="true" visble="false"  inherits="BaseVendorSimpleRuleTemplate">
        <Size x="250" y="64"/>
        <Layers>
            <Layer level="ARTWORK">
                <FontString parentKey="RuleName" inherits="GameFontHighlightLarge" justifyH="LEFT" text="RULE_NAME">
                    <Size x="272" y="20"/>
                    <Anchors>
                        <Anchor point="TOPLEFT"  x="32" y="-4"/>
                        <Anchor point="BOTTOMRIGHT" relativePoint="TOPRIGHT" x="-4" y="-24"/>
                    </Anchors>
                </FontString>
                <FontString parentKey="RuleDescription" inherits="GameFontNormalSmall" justifyH="LEFT" justifyV="TOP" text="RULE_DESCRIPTION" wordwrap="true">
                    <Anchors>
                        <Anchor point="TOPLEFT" relativeKey="$parent.RuleName" relativePoint="BOTTOMLEFT" x="0" y="-2"/>
                        <Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" x="-72" y="4"/>
                    </Anchors>
                </FontString>
            </Layer>
        </Layers>
        <Frames>
            <EditBox name="$parentItemLevel" parentKey="ItemLevel" inherits="InputBoxTemplate" letters="4" numeric="true" autoFocus="false" multiLne="false" enabled="false">
                <Size x="58" y="18"/>
                <Anchors>
                    <Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" x="-4" y="8"/>
                </Anchors>
                <Layers>
                    <Layer level="ARTWORK">
                        <FontString parentKey="Label" justifyH="LEFT" justifyV="MIDDLE" inherits="GameFontNormalSmall" text="ITEM_LEVEL_LABEL">
                            <Size x="100" y="12"/>
                            <Anchors>
                                <Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT" y="2"/>
                            </Anchors>
                        </FontString>
                    </Layer>                
                </Layers>
                <Scripts>
                    <OnShow>self.Label:SetTextColor(GRAY_FONT_COLOR.r, GRAY_FONT_COLOR.g, GRAY_FONT_COLOR.b)</OnShow>
                    <OnDisable>
                        self:SetTextColor(GRAY_FONT_COLOR.r, GRAY_FONT_COLOR.g, GRAY_FONT_COLOR.b)
                        self.Label:SetTextColor(GRAY_FONT_COLOR.r, GRAY_FONT_COLOR.g, GRAY_FONT_COLOR.b)
                    </OnDisable>
                    <OnEnable>
                        self:SetTextColor(HIGHLIGHT_FONT_COLOR.r, HIGHLIGHT_FONT_COLOR.g, HIGHLIGHT_FONT_COLOR.b)
                        self.Label:SetTextColor(HIGHLIGHT_FONT_COLOR.r, HIGHLIGHT_FONT_COLOR.g, HIGHLIGHT_FONT_COLOR.b)
                    </OnEnable>
                </Scripts>
            </EditBox>
        </Frames>
    </Frame>

    <Frame name="VendorSystemRuleList" virtual="true" enableMouse="true">
        <Scripts>
        </Scripts>
        <Frames>
            <ScrollFrame name="$parentView" parentKey="View" inherits="FauxScrollFrameTemplate" setAllPoints="true">
                <Layers>
                    <Layer level="BACKGROUND">
                        <Texture>
                            <Size x="20" y="20"/>
                            <Color r="0" g="0" b="0" a="0.5"/>
                            <Anchors>
                                <Anchor point="TOPLEFT" relativePoint="TOPRIGHT" x="2" y="-2"/>
                                <Anchor point="BOTTOMLEFT" relativePoint="BOTTOMRIGHT" x="4" y="2"/>
                            </Anchors>
                        </Texture>              
                    </Layer>        
                </Layers>           
                <Scripts>
                    <OnVerticalScroll>
                        local parent = self:GetParent()
                        FauxScrollFrame_OnVerticalScroll(self, offset, parent.RuleFrameSize, function() Vendor.RulesUI.UpdateRuleList(parent) end)
                    </OnVerticalScroll>
                    <OnShow>
                        Vendor.RulesUI.UpdateRuleList(self:GetParent())
                    </OnShow>
                </Scripts>
            </ScrollFrame>
        </Frames>
    </Frame>

    <Frame name="VendorSellSystemRuleList" inherits="VendorSystemRuleList" virtual="true">
        <Scripts>
            <OnLoad>
                Vendor.RulesUI.InitRuleList(self, Vendor.c_RuleType_Sell, Vendor.SystemRules.Sell)
            </OnLoad>
        </Scripts>
    </Frame>

    <Frame name="VendorKeepSystemRuleList" inherits="VendorSystemRuleList" virtual="true">
        <Scripts>
            <OnLoad>
                Vendor.RulesUI.InitRuleList(self, Vendor.c_RuleType_Keep, Vendor.SystemRules.Keep)
            </OnLoad>
        </Scripts>
    </Frame>    

    <Frame name="VendorSellSystemRulesRulesDialog" inherits="ButtonFrameTemplate" parent="UIParent" enableMouse="true" movable="true" toplevel="true" hidden="true" frameStrata="DIALOG">
        <Size x="350" y="512"/>
        <Anchors>
            <Anchor point="CENTER"/>
        </Anchors>      
        <Frames>
            <Frame parentKey="SellList" inherits="VendorSellSystemRuleList">
                <Anchors>
                    <Anchor point="TOPLEFT" x="10" y="-30"/>
                    <Anchor point="BOTTOMRIGHT" x="-34" y="28"/>
                </Anchors>
            </Frame>
            <Button name="$parentCancelButton" parentKey="Cancel" inherits="MagicButtonTemplate" text="CANCEL">
                <Size x="80" y="22"/>
                <Anchors>
                    <Anchor point="BOTTOMRIGHT" x="0" y="0"/>
                </Anchors>
                <Scripts>
                    <OnClick function="PortraitFrameCloseButton_OnClick"/>
                </Scripts>
            </Button>
            <Button name="$parentOkayButton" inherits="MagicButtonTemplate" parentKey="Okay" text="OKAY">
                <Size x="80" y="22"/>
                <Anchors>
                    <Anchor point="TOPRIGHT" relativeTo="$parentCancelButton" relativePoint="TOPLEFT" x="0" y="0"/>
                </Anchors>
                <Scripts>
                    <OnClick>
                        Vendor.RulesUI.ApplySystemRuleConfig(self:GetParent().SellList)
                        HideParentPanel(self)
                    </OnClick>
                </Scripts>
            </Button>       
        </Frames>
        <Scripts>
            <OnLoad>
                tinsert(UISpecialFrames, self:GetName());
                ButtonFrameTemplate_ShowButtonBar(self)
                ButtonFrameTemplate_HidePortrait(self)
                ButtonFrameTemplate_HideAttic(self)
                self.TitleText:SetText(Vendor:GetLocalizedStrings()["RULEUI_SYSRULE_SELL_DIALOG_TITLE"])
            </OnLoad>
            <OnShow>PlaySound(SOUNDKIT.IG_CHARACTER_INFO_OPEN)</OnShow>
            <OnHide>PlaySound(SOUNDKIT.IG_CHARACTER_INFO_CLOSE)</OnHide>            
        </Scripts>
    </Frame>
    
    <Frame name="VendorKeepSystemRulesRulesDialog" inherits="ButtonFrameTemplate" parent="UIParent" enableMouse="true" movable="true" toplevel="true" hidden="true" frameStrata="DIALOG">
        <Size x="350" y="512"/>
        <Anchors>
            <Anchor point="CENTER"/>
        </Anchors>      
        <Frames>
            <Frame parentKey="KeepList" inherits="VendorKeepSystemRuleList">
                <Anchors>
                    <Anchor point="TOPLEFT" x="10" y="-30"/>
                    <Anchor point="BOTTOMRIGHT" x="-34" y="28"/>
                </Anchors>
            </Frame>
            <Button name="$parentCancelButton" parentKey="Cancel" inherits="MagicButtonTemplate" text="CANCEL">
                <Size x="80" y="22"/>
                <Anchors>
                    <Anchor point="BOTTOMRIGHT" x="0" y="0"/>
                </Anchors>
                <Scripts>
                    <OnClick function="PortraitFrameCloseButton_OnClick"/>
                </Scripts>
            </Button>
            <Button name="$parentOkayButton" inherits="MagicButtonTemplate" parentKey="Okay" text="OKAY">
                <Size x="80" y="22"/>
                <Anchors>
                    <Anchor point="TOPRIGHT" relativeTo="$parentCancelButton" relativePoint="TOPLEFT" x="0" y="0"/>
                </Anchors>
                <Scripts>
                    <OnClick>
                        Vendor.RulesUI.ApplySystemRuleConfig(self:GetParent().KeepList)
                        HideParentPanel(self)                       
                    </OnClick>
                </Scripts>
            </Button>       
        </Frames>
        <Scripts>
            <OnLoad>
                tinsert(UISpecialFrames, self:GetName());
                ButtonFrameTemplate_ShowButtonBar(self)
                ButtonFrameTemplate_HidePortrait(self)
                ButtonFrameTemplate_HideAttic(self)
                self.TitleText:SetText(Vendor:GetLocalizedStrings()["RULEUI_SYSRULE_KEEP_DIALOG_TITLE"])
            </OnLoad>
            <OnShow>PlaySound(SOUNDKIT.IG_CHARACTER_INFO_OPEN)</OnShow>
            <OnHide>PlaySound(SOUNDKIT.IG_CHARACTER_INFO_CLOSE)</OnHide>            
        </Scripts>
    </Frame>
</Ui>
